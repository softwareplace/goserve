{{range .}}{{$opid := .OperationId}}
{{range .TypeDefinitions}}
// {{.TypeName}} defines parameters for {{$opid}}.
type {{.TypeName}} {{if .IsAlias}}={{end}} {{.Schema.TypeDecl}}
{{end}}
{{end}}

{{range .}}{{$entry := .}}
{{$opid := $entry.OperationId}}
func (rh *resourceHandlerImpl[T]){{$opid}}(ctx *apicontext.Request[T]) {
    {{ $processed := false -}}
    {{range .Bodies}}
    {{if and (not $processed) .IsSupported -}}
    {{$contentType := .ContentType -}}
        requestBody := {{.Schema.TypeDecl}}{}
        request.GetRequestBody(ctx, requestBody, func(ctx *apicontext.Request[T], body {{.Schema.TypeDecl}}) {
        rh.Service.{{$entry.OperationId}}Request(body, ctx)
        }, func(ctx *apicontext.Request[T], err error) {
        ctx.InternalServerError("Internal server error")
        })
        {{ $processed = true -}}
        {{end}}
        {{end}}
        {{if not $processed -}}
        //request := {{$entry.OperationId}}RequestParams{}
        // server.PopulateFieldsFromRequest(ctx, &request)
        rh.Service.{{$entry.OperationId}}Request(ctx)
        {{end}}
        }
{{end}}
